# vim常用命令整理
##**vim编辑器有三种模式：**
 - 命令模式：vi启动后默认进入的是命令模式，从这个模式使用命令可以切换到另外两种模式，同时无论在任何模式下只要按一下`[Esc]`键都可以返回命令模式。在命令模式中输入字母`i`就可以进入vi的输入模式编辑文件。
 - 输入模式：在这个模式中我们可以编辑、修改、输入等编辑工作，在编辑器最后一行显示一个`--INSERT--`标志着vi进入了输入模式。当我们完成修改输入等操作的时候我们需要保存文件，这时我们需要先返回命令模式，在进入末行模式保存。
 - 末行模式：在命令模式输入`：`即可进入该模式，在末行模式中有好多好用的命令。
 
##**编辑操作**
###**一、进入输入模式：**
- 插入命令：`i`
- 附加命令：`a`
- 打开命令：`o`
- 修改命令：`c`
- 取代命令：`r`
- 替换命令：`s`
- 退出命令：`Esc`

###**二、输入模式的操作：**
- 光标到行首：`Home`
- 光标到行尾：`End`
- 上下翻页：`Page Up` `Page Down`
- 删除光标位置的字符：`Delete`

###**三、命令模式使用的操作：**
####**删除(剪切)操作**
- 删除光标处的单个字符：`x`
- 删除光标处向右的三个字符：`3x`
- 删除光标所在行：`dd`
- 从当前行开始向下删除三行文本：`3dd`
- 删除当前字符到单词尾包括空格的所有字符：`dw`

####**撤销操作**
- 撤销上一步操作：`u`
- 取消所有操作:`U`
- 恢复对`u`命令的操作：`Ctrl+r`

####**复制操作**
- 复制当前行到vi缓冲区：`yy`
- 复制从当前行开始复制5行到vi缓冲区：`5yy`
- 复制当前光标所在位置到单词结尾字符的内容到vi缓冲区：`yw`
- 复制当前单词部分和其后面2个单词到vi缓冲区：`3yw`
- 复制光标所在位置到行尾内容到vi缓冲区：`y$`
- 复制光标所在位置到行首内容到vi缓冲区：`y^`
- 复制到系统剪贴板：`"+y`
- 从vim缓冲区粘贴到vim文件：`p`
- 从系统剪贴板粘贴到vim文件：`"+p`

####**移动操作**
- 向上移动n行：`nk`
- 向下移动n行：`nj`
- 向左移动n个字符：`nh`
- 向右移动n个字符：`nl`
- 向左移动n个单词，光标移动到单词的首字母上：`nw`
- 与`w`相反：`b`
- 向左移动n个单词，光标移动到单词的最后一个字母上：`ne`
- 与`e`相反：`ge`
- 移动到第n行的行尾：`n$`
- 移动光标到行首：`0(数字)`
- 移动光标到行首第一个非空字符上去：`^`
- 移动到文件开头：`gg`
- 移动到文件结尾：`shift+g`
- 向前翻页：`ctrl+f`
- 向后翻页：`ctrl+b`

###**四、末行模式使用的操作：**
####**查找操作**
- 至上而下的查找：`:/pattern`，其中`/`代表从光标所在位置起开始查找，例如：`:/work`
- 至下而上的查找：`:?pattern`，其中`/`代表从光标所在位置起开始查找，例如：`:?work`

####**替换操作**
- 用new替换行中首次出现的old：`:s/old/new`
- 用new替换行中所有出现的old：`:s/old/new/g`
- 用new替换从第4行到第6行中出现的old：`:4,6 s/old/new/g`
- 用new替换整篇中出现的old：`:% s/old/new/g`
如果替换的范围较大时，在所有的命令尾加一个`c`命令，强制每个替换需要用户进行确认，例如:`s/old/new/c` 或`s/old/new/gc`

####**恢复文件**
vi在编辑某一个文件时，会生成一个临时文件，这个文件以`.`开头并以 `.swp`结尾。正常退出该文件自动删除，如果意外退出例如忽然断电，该文件不会删除，我们在下次编辑时可以选择一下命令处理：
- 只读打开，不改变文件内容：`O`
- 继续编辑文件，不恢复`.swp`文件保存的内容：`E`
- 将恢复上次编辑以后未保存文件内容：`R`
- 退出vi：`Q`
- 删除`.swp`文件：`D`
- 恢复未保存的内容：`vi -r filename`

###**五、末行模式使用的操作：**
vim还有个可是模块，方便选择替换

- 选定文本块，使用`v`进入可视模式；移动光标键选定内容
- 复制选定块到缓冲区：`y`
- 剪切选定块到缓冲区：`d`
- 粘贴缓冲区中的内容：`p`

###**六、其他：**
- 在同一编辑窗打开第二个文件，用`:sp [filename]`
- 在多个编辑文件之间切换，用`Ctrl+w`
- 自动补全：`ctrl+p`
- 命令前面加数字表示重复次数，加字母表示使用的缓冲区名称
- 获取帮助，用`:help [内容或命令]`
